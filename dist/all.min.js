"use strict";!function(){function e(){function e(e,t,a,n){function r(t){if(console.log("parsing:",t),!t)return t;var a=moment(t);return"string"===e.modelType?a.format(e.modelFormat):a.toDate()}function i(t){return t?moment(t).format(e.formatString||"M/DD/YYYY h:mm a"):t}function o(t){if(!t)return t;var a=moment(t,e.formatString||"M/DD/YYYY h:mm a"),n="string"===e.modelType?a.format(e.modelFormat):a.toDate();return console.log("parseView:",t,n),n}var d=t.find("input");e.iconClass=a.iconClass||"fa fa-calendar",e.modelFormat="YYYY-MM-DD HH:mm:ss",e.modelFormatter=e.modelFormatter||r,e.viewFormatter=e.viewFormatter||i,e.viewParser=e.viewParser||o,e.placeholder=a.placeholder,e.inputConfig={viewFormatter:e.viewFormatter,viewParser:e.viewParser},e.$watch("ngModel",function(t,a){e.onChange&&e.onChange({$value:t}),n.$setValidity("schemaForm",!0),console.log("#required#",e.required),e.required&&n.$setValidity("tv4-302",!(!e.ngModel&&0!==e.ngModel)),angular.equals(t,a)||n.$setDirty()}),"hour"!==e.maxView&&d.blur(function(){var t=moment(e.ngModel);t.year()<2e3&&(e.ngModel=t.year(t.year()+2e3))})}return{restrict:"E",require:"ngModel",template:'\n          <div dropdown class="dropdown">\n            <div class="input-group" data-target="#" id="{{inputId}}-container"\n                 dropdown-toggle ng-disabled="{{isDisabled}}">\n              <input type="text"\n                     class="form-control"\n                     id="{{inputId}}"\n                     name="{{inputId}}"\n                     ng-model="ngModel"\n                     cn-datetime-config="inputConfig"\n                     ng-disabled="isDisabled"\n                     ng-required="required"\n                     placeholder="{{placeholder}}">\n              <span class="input-group-btn">\n                <button class="btn" ng-disabled="isDisabled">\n                  <i class="{{iconClass}}"></i>\n                </button>\n              </span>\n            </div>\n            <ul class="dropdown-menu cn-datetimepicker-dropdown" role="menu">\n              <li>\n                <datetimepicker\n                  ng-model="ngModel"\n                  min-date="minDate"\n                  max-date="maxDate"\n                  model-formatter="modelFormatter"\n                  model-parser="modelParser"\n                  datetimepicker-config="{ dropdownSelector: \'#\' + inputId + \'-container\', minView: minView || \'minute\', maxView: maxView || \'year\' }">\n                </datetimepicker>\n              </li>\n            </ul>\n          </div>',scope:{ngModel:"=",minDate:"=",maxDate:"=",maxView:"@",minView:"@",isDisabled:"=",inputId:"@",formatString:"@",modelType:"@",modelFormatter:"=?",modelParser:"=?",viewFormatter:"=?",viewParser:"=?",required:"=cnDateRequired",onChange:"&"},compile:function(){return{pre:e}}}}function t(){function e(e,t,a,n){n.$formatters.unshift(e.config.viewFormatter),n.$parsers.unshift(e.config.viewParser)}return{restrict:"A",require:"ngModel",priority:9e3,scope:{config:"=cnDatetimeConfig"},link:e}}function a(e){var t=function(e){var t=["startView","maxView","minView","minuteStep","dropdownSelector","weekStart"];for(var a in e)if(e.hasOwnProperty(a)&&t.indexOf(a)<0)throw"invalid option: "+a;if(e.maxView&&n.indexOf(e.maxView)<n.indexOf(e.startView)&&(e.startView=e.maxView),n.indexOf(e.startView)<0)throw"invalid startView value: "+e.startView;if(n.indexOf(e.minView)<0)throw"invalid minView value: "+e.minView;if(n.indexOf(e.minView)>n.indexOf(e.startView))throw"startView must be greater than minView";if(!angular.isNumber(e.minuteStep))throw"minuteStep must be numeric";if(e.minuteStep<=0||e.minuteStep>=60)throw"minuteStep must be greater than zero and less than 60";if(null!==e.dropdownSelector&&!angular.isString(e.dropdownSelector))throw"dropdownSelector must be a string";if(!angular.isNumber(e.weekStart))throw"weekStart must be numeric";if(e.weekStart<0||e.weekStart>6)throw"weekStart must be greater than or equal to zero and less than 7"};return{restrict:"E",require:"ngModel",template:"\n      <div class='datetimepicker'>\n        <table class='table table-condensed'>\n          <thead>\n          <tr>\n            <th class='left'\n                data-ng-click='changeView(data.currentView, data.leftDate, $event)'>\n              <i class='glyphicon glyphicon-arrow-left'/>\n            </th>\n            <th class='switch'\n                ng-class=\"{'disabled': !showView(data.previousView)}\"\n                colspan='5'\n                data-ng-click='changeView(data.previousView, data.currentDate, $event, !showView(data.previousView))'>\n                {{ data.title }}\n            </th>\n            <th class='right'\n                data-ng-click='changeView(data.currentView, data.rightDate, $event)'>\n              <i class='glyphicon glyphicon-arrow-right'/>\n            </th>\n          </tr>\n          <tr>\n            <th class='dow' data-ng-repeat='day in data.dayNames'>{{ day }}</th>\n          </tr>\n          </thead>\n          <tbody>\n          <tr data-ng-class=\"{ hide: data.currentView == 'day' }\">\n            <td colspan='7' >\n              <span class='{{ data.currentView }}'\n                    data-ng-repeat='dateValue in data.dates'\n                    data-ng-class='{active: dateValue.active, past: dateValue.past, future: dateValue.future, disabled: dateValue.disabled}'\n                    data-ng-click=\"changeView(data.nextView, dateValue.date, $event, dateValue.disabled, true)\">\n                {{ dateValue.display }}\n              </span>\n            </td>\n          </tr>\n          <tr data-ng-show='data.currentView == \"day\"' data-ng-repeat='week in data.weeks'>\n            <td data-ng-repeat='dateValue in week.dates'\n                data-ng-click='changeView(data.nextView, dateValue.date, $event, dateValue.disabled, true)'\n                class='day'\n                data-ng-class='{active: dateValue.active, past: dateValue.past, future: dateValue.future, disabled: dateValue.disabled}'>\n              {{ dateValue.display }}\n            </td>\n          </tr>\n          </tbody>\n        </table>\n      </div>",scope:{ngModel:"=",onSetTime:"=",minDate:"=",maxDate:"=",modelFormatter:"=?",modelParser:"=?",datetimepickerConfig:"=?"},replace:!0,link:function(a,r,i,o){function d(e){return n.indexOf(l.maxView)>=n.indexOf(e)}var m=function(e){return e};a.modelFormatter=a.modelFormatter||m,a.modelParser=a.modelParser||m,a.showView=d;var s={};a.datetimepickerConfig?s=a.datetimepickerConfig:i.datetimepickerConfig&&(s=a.$eval(i.datetimepickerConfig));var l={};angular.extend(l,e,s),t(l);var u={year:function(e){for(var t=moment(e).startOf("year"),n=10*parseInt(t.year()/10,10),r=moment(t).year(n-1).startOf("year"),i=a.ngModel?moment(a.modelParser(a.ngModel)).year():0,o={currentView:"year",nextView:"year"===l.minView?"setTime":"month",title:n+"-"+(n+9),leftDate:moment(r).subtract(9,"year").valueOf(),rightDate:moment(r).add(11,"year").valueOf(),dates:[],setUnits:["year"]},d=0;12>d;d++){var m=moment(r).add(d,"years"),s={date:m.valueOf(),display:m.format("YYYY"),past:m.year()<n,future:m.year()>n+9,active:m.year()===i,disabled:a.minDate&&m.year()<moment(a.minDate).year()||a.maxDate&&m.year()>moment(a.maxDate).year()};o.dates.push(s)}return o},month:function(e){for(var t=moment(e).startOf("year"),n=a.ngModel?moment(a.modelParser(a.ngModel)).format("YYYY-MMM"):0,r={previousView:"year",currentView:"month",nextView:"month"===l.minView?"setTime":"day",currentDate:t.valueOf(),title:t.format("YYYY"),leftDate:moment(t).subtract(1,"year").valueOf(),rightDate:moment(t).add(1,"year").valueOf(),dates:[],setUnits:["year","month"]},i=0;12>i;i++){var o=moment(t).add(i,"months"),d={date:o.valueOf(),display:o.format("MMM"),active:o.format("YYYY-MMM")===n,disabled:a.minDate&&o.add(1,"month").isBefore(a.minDate)||a.maxDate&&o.subtract(1,"month").isAfter(a.maxDate)};r.dates.push(d)}return r},day:function(e){for(var t=moment(e),n=moment(t).startOf("month"),r=moment(t).endOf("month"),i=moment(n).subtract(Math.abs(n.weekday()-l.weekStart),"days"),o=a.ngModel?moment(a.modelParser(a.ngModel)).format("YYYY-MMM-DD"):"",m={previousView:"month",currentView:"day",nextView:"day"===l.minView?"setTime":"hour",currentDate:t.valueOf(),title:t.format("MMM"+(d("year")?" YYYY":"")),leftDate:moment(n).subtract(1,"months").valueOf(),rightDate:moment(n).add(1,"months").valueOf(),dayNames:[],weeks:[],setUnits:["year","month","date"]},s=l.weekStart;s<l.weekStart+7;s++)m.dayNames.push(moment().weekday(s).format("dd"));for(var u=0;6>u;u++){for(var c={dates:[]},f=0;7>f;f++){var w=moment(i).add(7*u+f,"days"),g={date:w.valueOf(),display:w.format("D"),active:w.format("YYYY-MMM-DD")===o,past:w.isBefore(n),future:w.isAfter(r),disabled:a.minDate&&w.add(1,"days").isBefore(a.minDate)||a.maxDate&&w.subtract(1,"days").isAfter(a.maxDate)};c.dates.push(g)}m.weeks.push(c)}return m},hour:function(e){for(var t=moment(e).hour(0).minute(0).second(0),n=a.ngModel?moment(a.modelParser(a.ngModel)).format("YYYY-MM-DD H"):"",r={previousView:"day",currentView:"hour",nextView:"hour"===l.minView?"setTime":"minute",currentDate:t.valueOf(),title:d("day")?t.format((d("month")?"MMM ":"")+"DD"+(d("year")?" YYYY":"")):"Hour",leftDate:moment(t).subtract(1,"days").valueOf(),rightDate:moment(t).add(1,"days").valueOf(),dates:[],setUnits:["year","month","date","hour"]},i=0;24>i;i++){var o=moment(t).add(i,"hours"),m={date:o.valueOf(),display:o.format("h a"),active:o.format("YYYY-MM-DD H")===n,disabled:a.minDate&&o.add(1,"hours").isBefore(a.minDate)||a.maxDate&&o.subtract(1,"hours").isAfter(a.maxDate)};r.dates.push(m)}return r},minute:function(e){for(var t=moment(e).minute(0).second(0),n=a.ngModel?moment(a.modelParser(a.ngModel)).format("YYYY-MM-DD H:mm"):"",r={previousView:"hour",currentView:"minute",nextView:"setTime",currentDate:t.valueOf(),title:t.format(""+(d("month")?"MMM ":"")+(d("day")?"DD ":"")+(d("year")?" YYYY ":"")+"h:mm a"),leftDate:moment(t).subtract(1,"hours").valueOf(),rightDate:moment(t).add(1,"hours").valueOf(),dates:[],setUnits:["year","month","date","hour","minute"]},i=60/l.minuteStep,o=0;i>o;o++){var m=moment(t).add(o*l.minuteStep,"minute"),s={date:m.valueOf(),display:m.format("h:mm"),active:m.format("YYYY-MM-DD H:mm")===n,disabled:a.minDate&&m.subtract(1,"minutes").isBefore(a.minDate)||a.maxDate&&m.add(1,"minutes").isAfter(a.maxDate)};r.dates.push(s)}return r},setTime:function(e,t){var n=new Date(e),r=new Date(n.getTime());return l.dropdownSelector&&!t&&jQuery(l.dropdownSelector).dropdown("toggle"),angular.isFunction(a.onSetTime)&&a.onSetTime(r,a.ngModel),o.$setViewValue(a.modelFormatter(r)),u[a.data.currentView](e)}},c=function(){console.log("getUTCTime:",a.ngModel);var e=a.ngModel?moment(a.modelParser(a.ngModel)).toDate():new Date;return e.getTime()};a.changeView=function(e,t,n,r,i){if(n&&(n.stopPropagation(),n.preventDefault()),!r&&e&&t>-(1/0)&&u[e]){if(i&&"setTime"!==e){var o=moment(t),d=a.ngModel?moment(a.modelParser(a.ngModel)):moment().startOf("hour");_.each(a.data.setUnits,function(e){var t=o[e](),a=d[e](t).valueOf();u.setTime(a,!0)})}a.data=u[e](t)}},a.changeView(l.startView,c()),a.$watch("ngModel",function(e,t){e!==t&&a.changeView(a.data.currentView,c())})}}}angular.module("ui.bootstrap.datetimepicker",[]).constant("dateTimePickerConfig",{dropdownSelector:null,minuteStep:5,maxView:"year",minView:"minute",startView:"day",weekStart:0}).directive("cnDatetimepicker",e).directive("cnDatetimeConfig",t).directive("datetimepicker",a);var n=["minute","hour","day","month","year"];a.$inject=["dateTimePickerConfig"]}();
//# sourceMappingURL=all.min.js.map
