{"version":3,"sources":["all.min.js","cn-datetimepicker.js"],"names":["_typeof","Symbol","iterator","obj","constructor","prototype","cnDatetimepicker","Link","$scope","elem","attrs","ctrl","formatModel","val","date","moment","modelType","format","modelFormat","toDate","formatView","formatString","parseView","m","update","input","find","iconClass","modelFormatter","modelParser","viewFormatter","viewParser","placeholder","inputConfig","lostFocus","console","log","$watch","newVal","prevVal","ngModel","onChange","$value","$setValidity","required","angular","equals","$setDirty","maxView","blur","year","restrict","require","template","scope","minDate","maxDate","defaultTime","minView","isDisabled","inputId","compile","pre","cnDatetimeConfig","$formatters","unshift","config","$parsers","priority","link","datetimepicker","defaultConfig","validateConfiguration","configuration","validOptions","prop","hasOwnProperty","indexOf","validViews","startView","isNumber","minuteStep","dropdownSelector","isString","weekStart","onSetTime","datetimepickerConfig","replace","element","showView","view","noop","directiveConfig","$eval","extend","dataFactory","unixDate","selectedDate","startOf","startDecade","parseInt","startDate","activeYear","result","currentView","nextView","title","leftDate","subtract","valueOf","rightDate","add","dates","setUnits","i","yearMoment","dateValue","display","past","future","active","disabled","push","month","activeDate","previousView","currentDate","monthMoment","isBefore","isAfter","day","startOfMonth","endOfMonth","endOf","Math","abs","weekday","dayNames","weeks","dayNumber","week","j","hour","minute","second","activeFormat","hourMoment","limit","setTime","keepDropdown","tempDate","Date","newDate","getTime","jQuery","dropdown","isFunction","$setViewValue","data","getUTCTime","changeView","viewName","event","invalid","stopPropagation","preventDefault","Infinity","curDate","_","each","unit","setVal","setDate","cur","prev","module","constant","directive","$inject"],"mappings":"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","file":"all.min.js","sourcesContent":["'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n(function () {\n  'use strict';\n  /*globals angular, moment, jQuery */\n  /*jslint vars:true */\n\n  /**\n   * @license angular-bootstrap-datetimepicker  v0.2.4\n   * (c) 2013 Knight Rider Consulting, Inc. http://www.knightrider.com\n   * License: MIT\n   */\n\n  /**\n   *\n   *    @author       dzuch, Dale \"Ducky\" Lotts\n   *    @since        2013-Jul-8\n   */\n\n  angular.module('ui.bootstrap.datetimepicker', []).constant('dateTimePickerConfig', {\n    dropdownSelector: null,\n    minuteStep: 5,\n    maxView: 'year',\n    minView: 'minute',\n    startView: 'day',\n    weekStart: 0\n  }).directive('cnDatetimepicker', cnDatetimepicker).directive('cnDatetimeConfig', cnDatetimeConfig).directive('datetimepicker', datetimepicker);\n\n  // Order of the elements in the validViews array is significant.\n  var validViews = ['minute', 'hour', 'day', 'month', 'year'];\n\n  function cnDatetimepicker() {\n    return {\n      restrict: 'E',\n      require: 'ngModel',\n      template: '\\n          <div dropdown class=\"dropdown\">\\n            <div class=\"input-group\" data-target=\"#\" id=\"{{inputId}}-container\"\\n                 dropdown-toggle ng-disabled=\"{{isDisabled}}\">\\n              <input type=\"text\"\\n                     class=\"form-control\"\\n                     id=\"{{inputId}}\"\\n                     name=\"{{inputId}}\"\\n                     ng-model=\"ngModel\"\\n                     ng-blur=\"lostFocus()\"\\n                     cn-datetime-config=\"inputConfig\"\\n                     ng-disabled=\"isDisabled\"\\n                     ng-required=\"required\"\\n                     placeholder=\"{{placeholder}}\">\\n              <span class=\"input-group-btn\">\\n                <button class=\"btn\" ng-disabled=\"isDisabled\">\\n                  <i class=\"{{iconClass}}\"></i>\\n                </button>\\n              </span>\\n            </div>\\n            <ul class=\"dropdown-menu cn-datetimepicker-dropdown\" role=\"menu\">\\n              <li>\\n                <datetimepicker\\n                  ng-model=\"ngModel\"\\n                  min-date=\"minDate\"\\n                  max-date=\"maxDate\"\\n                  default-time=\"defaultTime\"\\n                  model-formatter=\"modelFormatter\"\\n                  model-parser=\"modelParser\"\\n                  datetimepicker-config=\"{ dropdownSelector: \\'#\\' + inputId + \\'-container\\', minView: minView || \\'minute\\', maxView: maxView || \\'year\\' }\">\\n                </datetimepicker>\\n              </li>\\n            </ul>\\n          </div>',\n      scope: {\n        ngModel: '=',\n        minDate: '=',\n        maxDate: '=',\n        defaultTime: '=',\n        maxView: '@',\n        minView: '@',\n        isDisabled: '=',\n        inputId: '@',\n        formatString: '@',\n        modelType: '@',\n        //modelFormat: '@',\n        modelFormatter: '=?',\n        modelParser: '=?',\n        viewFormatter: '=?',\n        viewParser: '=?',\n        required: '=cnDateRequired',\n        onChange: '&'\n      },\n      compile: function compile() {\n        return { pre: Link };\n      }\n      //link: Link\n    };\n\n    function Link($scope, elem, attrs, ctrl) {\n\n      var input = elem.find('input');\n\n      //$scope.required = attrs.required;\n      $scope.iconClass = attrs.iconClass || 'fa fa-calendar';\n      $scope.modelFormat = 'YYYY-MM-DD HH:mm:ss';\n      $scope.modelFormatter = $scope.modelFormatter || formatModel;\n      $scope.modelParser = $scope.modelParser || function (val) {\n        return val;\n      };\n      $scope.viewFormatter = $scope.viewFormatter || formatView;\n      $scope.viewParser = $scope.viewParser || parseView;\n      $scope.placeholder = attrs.placeholder;\n      $scope.modelType = $scope.modelType || 'string';\n\n      $scope.inputConfig = {\n        viewFormatter: $scope.viewFormatter,\n        viewParser: $scope.viewParser\n      };\n\n      //////////\n\n      $scope.lostFocus = function () {\n        console.log('Focus Lost');\n      };\n\n      $scope.$watch('ngModel', function (newVal, prevVal) {\n        console.log('newVal', newVal);\n        console.log('prevVal', prevVal);\n        console.log('$scope.modelType', $scope.modelType);\n        if ((typeof newVal === 'undefined' ? 'undefined' : _typeof(newVal)) !== $scope.modelType) {\n          $scope.ngModel = formatModel(newVal);\n          return;\n        }\n        console.log('Process others', $scope);\n        if ($scope.onChange) {\n\n          $scope.onChange({ $value: newVal });\n        }\n        ctrl.$setValidity('schemaForm', true);\n        if ($scope.required) {\n          ctrl.$setValidity('tv4-302', !!($scope.ngModel || $scope.ngModel === 0));\n        }\n        if (!angular.equals(newVal, prevVal)) {\n          ctrl.$setDirty();\n        }\n      });\n\n      if ($scope.maxView !== \"hour\") {\n        input.blur(function () {\n          var date = moment($scope.ngModel);\n          if (date.year() < 2000) $scope.ngModel = date.year(date.year() + 2000);\n        });\n      }\n\n      function formatModel(val) {\n        if (!val) return val;\n\n        var date = moment(val);\n        return $scope.modelType === 'string' ? date.format($scope.modelFormat) : date.toDate();\n      }\n\n      function formatView(val) {\n        if (!val) return val;\n\n        return moment(val).format($scope.formatString || 'M/DD/YYYY h:mm a');\n      }\n\n      function parseView(val) {\n        if (!val) return val;\n\n        var m = moment(val, $scope.formatString || 'M/DD/YYYY h:mm a');\n        var update = $scope.modelType === 'string' ? m.format($scope.modelFormat) : m.toDate();\n\n        return update;\n      }\n    }\n  }\n\n  function cnDatetimeConfig() {\n    return {\n      restrict: 'A',\n      require: 'ngModel',\n      priority: 9000,\n      scope: {\n        config: '=cnDatetimeConfig'\n      },\n      link: Link\n    };\n\n    function Link($scope, elem, attrs, ctrl) {\n      ctrl.$formatters.unshift($scope.config.viewFormatter);\n      ctrl.$parsers.unshift($scope.config.viewParser);\n    }\n  }\n\n  datetimepicker.$inject = ['dateTimePickerConfig'];\n  function datetimepicker(defaultConfig) {\n\n    var validateConfiguration = function validateConfiguration(configuration) {\n      var validOptions = ['startView', 'maxView', 'minView', 'minuteStep', 'dropdownSelector', 'weekStart'];\n\n      for (var prop in configuration) {\n        if (configuration.hasOwnProperty(prop)) {\n          if (validOptions.indexOf(prop) < 0) {\n            throw \"invalid option: \" + prop;\n          }\n        }\n      }\n\n      if (configuration.maxView && validViews.indexOf(configuration.maxView) < validViews.indexOf(configuration.startView)) {\n        configuration.startView = configuration.maxView;\n      }\n\n      if (validViews.indexOf(configuration.startView) < 0) {\n        throw \"invalid startView value: \" + configuration.startView;\n      }\n\n      if (validViews.indexOf(configuration.minView) < 0) {\n        throw \"invalid minView value: \" + configuration.minView;\n      }\n\n      if (validViews.indexOf(configuration.minView) > validViews.indexOf(configuration.startView)) {\n        throw \"startView must be greater than minView\";\n      }\n\n      if (!angular.isNumber(configuration.minuteStep)) {\n        throw \"minuteStep must be numeric\";\n      }\n      if (configuration.minuteStep <= 0 || configuration.minuteStep >= 60) {\n        throw \"minuteStep must be greater than zero and less than 60\";\n      }\n      if (configuration.dropdownSelector !== null && !angular.isString(configuration.dropdownSelector)) {\n        throw \"dropdownSelector must be a string\";\n      }\n\n      if (!angular.isNumber(configuration.weekStart)) {\n        throw \"weekStart must be numeric\";\n      }\n      if (configuration.weekStart < 0 || configuration.weekStart > 6) {\n        throw \"weekStart must be greater than or equal to zero and less than 7\";\n      }\n    };\n\n    return {\n      restrict: 'E',\n      require: 'ngModel',\n      template: '\\n      <div class=\\'datetimepicker\\'>\\n        <table class=\\'table table-condensed\\'>\\n          <thead>\\n          <tr>\\n            <th class=\\'left\\'\\n                data-ng-click=\\'changeView(data.currentView, data.leftDate, $event)\\'>\\n              <i class=\\'glyphicon glyphicon-arrow-left\\'/>\\n            </th>\\n            <th class=\\'switch\\'\\n                ng-class=\"{\\'disabled\\': !showView(data.previousView)}\"\\n                colspan=\\'5\\'\\n                data-ng-click=\\'changeView(data.previousView, data.currentDate, $event, !showView(data.previousView))\\'>\\n                {{ data.title }}\\n            </th>\\n            <th class=\\'right\\'\\n                data-ng-click=\\'changeView(data.currentView, data.rightDate, $event)\\'>\\n              <i class=\\'glyphicon glyphicon-arrow-right\\'/>\\n            </th>\\n          </tr>\\n          <tr>\\n            <th class=\\'dow\\' data-ng-repeat=\\'day in data.dayNames\\'>{{ day }}</th>\\n          </tr>\\n          </thead>\\n          <tbody>\\n          <tr data-ng-class=\"{ hide: data.currentView == \\'day\\' }\">\\n            <td colspan=\\'7\\' >\\n              <span class=\\'{{ data.currentView }}\\'\\n                    data-ng-repeat=\\'dateValue in data.dates\\'\\n                    data-ng-class=\\'{active: dateValue.active, past: dateValue.past, future: dateValue.future, disabled: dateValue.disabled}\\'\\n                    data-ng-click=\"changeView(data.nextView, dateValue.date, $event, dateValue.disabled, true)\">\\n                {{ dateValue.display }}\\n              </span>\\n            </td>\\n          </tr>\\n          <tr data-ng-show=\\'data.currentView == \"day\"\\' data-ng-repeat=\\'week in data.weeks\\'>\\n            <td data-ng-repeat=\\'dateValue in week.dates\\'\\n                data-ng-click=\\'changeView(data.nextView, dateValue.date, $event, dateValue.disabled, true)\\'\\n                class=\\'day\\'\\n                data-ng-class=\\'{active: dateValue.active, past: dateValue.past, future: dateValue.future, disabled: dateValue.disabled}\\'>\\n              {{ dateValue.display }}\\n            </td>\\n          </tr>\\n          </tbody>\\n        </table>\\n      </div>',\n      scope: {\n        ngModel: \"=\",\n        onSetTime: \"=\",\n        minDate: '=',\n        maxDate: '=',\n        defaultTime: '=',\n        modelFormatter: '=?',\n        modelParser: '=?',\n        datetimepickerConfig: \"=?\"\n      },\n      replace: true,\n      link: function link(scope, element, attrs, ctrl) {\n\n        var noop = function noop(val) {\n          return val;\n        };\n\n        scope.modelFormatter = scope.modelFormatter || noop;\n        scope.modelParser = scope.modelParser || noop;\n        scope.showView = showView;\n\n        var directiveConfig = {};\n\n        if (scope.datetimepickerConfig) {\n          directiveConfig = scope.datetimepickerConfig;\n        } else if (attrs.datetimepickerConfig) {\n          directiveConfig = scope.$eval(attrs.datetimepickerConfig);\n        }\n\n        var configuration = {};\n\n        angular.extend(configuration, defaultConfig, directiveConfig);\n\n        validateConfiguration(configuration);\n\n        var dataFactory = {\n          year: function year(unixDate) {\n            var selectedDate = moment(unixDate).startOf('year');\n            // View starts one year before the decade starts and ends one year after the decade ends\n            // i.e. passing in a date of 1/1/2013 will give a range of 2009 to 2020\n            // Truncate the last digit from the current year and subtract 1 to get the start of the decade\n            var startDecade = parseInt(selectedDate.year() / 10, 10) * 10;\n            var startDate = moment(selectedDate).year(startDecade - 1).startOf('year');\n            var activeYear = scope.ngModel ? moment(scope.modelParser(scope.ngModel)).year() : 0;\n\n            var result = {\n              'currentView': 'year',\n              'nextView': configuration.minView === 'year' ? 'setTime' : 'month',\n              'title': startDecade + '-' + (startDecade + 9),\n              'leftDate': moment(startDate).subtract(9, 'year').valueOf(),\n              'rightDate': moment(startDate).add(11, 'year').valueOf(),\n              'dates': [],\n              'setUnits': ['year']\n            };\n\n            for (var i = 0; i < 12; i++) {\n              var yearMoment = moment(startDate).add(i, 'years');\n              var dateValue = {\n                'date': yearMoment.valueOf(),\n                'display': yearMoment.format('YYYY'),\n                'past': yearMoment.year() < startDecade,\n                'future': yearMoment.year() > startDecade + 9,\n                'active': yearMoment.year() === activeYear,\n                'disabled': scope.minDate && yearMoment.year() < moment(scope.minDate).year() || scope.maxDate && yearMoment.year() > moment(scope.maxDate).year()\n              };\n\n              result.dates.push(dateValue);\n            }\n\n            return result;\n          },\n\n          month: function month(unixDate) {\n\n            var startDate = moment(unixDate).startOf('year');\n\n            var activeDate = scope.ngModel ? moment(scope.modelParser(scope.ngModel)).format('YYYY-MMM') : 0;\n\n            var result = {\n              'previousView': 'year',\n              'currentView': 'month',\n              'nextView': configuration.minView === 'month' ? 'setTime' : 'day',\n              'currentDate': startDate.valueOf(),\n              'title': startDate.format('YYYY'),\n              'leftDate': moment(startDate).subtract(1, 'year').valueOf(),\n              'rightDate': moment(startDate).add(1, 'year').valueOf(),\n              'dates': [],\n              'setUnits': ['year', 'month']\n            };\n\n            for (var i = 0; i < 12; i++) {\n              var monthMoment = moment(startDate).add(i, 'months');\n              var dateValue = {\n                'date': monthMoment.valueOf(),\n                'display': monthMoment.format('MMM'),\n                'active': monthMoment.format('YYYY-MMM') === activeDate,\n                'disabled': scope.minDate && monthMoment.add(1, 'month').isBefore(scope.minDate) || scope.maxDate && monthMoment.subtract(1, 'month').isAfter(scope.maxDate)\n              };\n\n              result.dates.push(dateValue);\n            }\n\n            return result;\n          },\n\n          day: function day(unixDate) {\n\n            var selectedDate = moment(unixDate);\n            var startOfMonth = moment(selectedDate).startOf('month');\n            var endOfMonth = moment(selectedDate).endOf('month');\n\n            var startDate = moment(startOfMonth).subtract(Math.abs(startOfMonth.weekday() - configuration.weekStart), 'days');\n\n            var activeDate = scope.ngModel ? moment(scope.modelParser(scope.ngModel)).format('YYYY-MMM-DD') : '';\n\n            var result = {\n              'previousView': 'month',\n              'currentView': 'day',\n              'nextView': configuration.minView === 'day' ? 'setTime' : 'hour',\n              'currentDate': selectedDate.valueOf(),\n              'title': selectedDate.format('MMM' + (showView('year') ? ' YYYY' : '')),\n              'leftDate': moment(startOfMonth).subtract(1, 'months').valueOf(),\n              'rightDate': moment(startOfMonth).add(1, 'months').valueOf(),\n              'dayNames': [],\n              'weeks': [],\n              'setUnits': ['year', 'month', 'date']\n            };\n\n            for (var dayNumber = configuration.weekStart; dayNumber < configuration.weekStart + 7; dayNumber++) {\n              result.dayNames.push(moment().weekday(dayNumber).format('dd'));\n            }\n\n            for (var i = 0; i < 6; i++) {\n              var week = { dates: [] };\n              for (var j = 0; j < 7; j++) {\n                var monthMoment = moment(startDate).add(i * 7 + j, 'days');\n                var dateValue = {\n                  'date': monthMoment.valueOf(),\n                  'display': monthMoment.format('D'),\n                  'active': monthMoment.format('YYYY-MMM-DD') === activeDate,\n                  'past': monthMoment.isBefore(startOfMonth),\n                  'future': monthMoment.isAfter(endOfMonth),\n                  'disabled': scope.minDate && monthMoment.add(1, 'days').isBefore(scope.minDate) || scope.maxDate && monthMoment.subtract(1, 'days').isAfter(scope.maxDate)\n                };\n                week.dates.push(dateValue);\n              }\n              result.weeks.push(week);\n            }\n\n            return result;\n          },\n\n          hour: function hour(unixDate) {\n            var selectedDate = moment(unixDate).hour(0).minute(0).second(0);\n\n            var activeFormat = scope.ngModel ? moment(scope.modelParser(scope.ngModel)).format('YYYY-MM-DD H') : '';\n\n            var result = {\n              'previousView': 'day',\n              'currentView': 'hour',\n              'nextView': configuration.minView === 'hour' ? 'setTime' : 'minute',\n              'currentDate': selectedDate.valueOf(),\n              'title': showView('day') ? selectedDate.format((showView('month') ? 'MMM ' : '') + 'DD' + (showView('year') ? ' YYYY' : '')) : 'Hour',\n              'leftDate': moment(selectedDate).subtract(1, 'days').valueOf(),\n              'rightDate': moment(selectedDate).add(1, 'days').valueOf(),\n              'dates': [],\n              'setUnits': ['year', 'month', 'date', 'hour']\n            };\n\n            for (var i = 0; i < 24; i++) {\n              var hourMoment = moment(selectedDate).add(i, 'hours');\n              var dateValue = {\n                'date': hourMoment.valueOf(),\n                'display': hourMoment.format('h a'),\n                'active': hourMoment.format('YYYY-MM-DD H') === activeFormat,\n                'disabled': scope.minDate && hourMoment.add(1, 'hours').isBefore(scope.minDate) || scope.maxDate && hourMoment.subtract(1, 'hours').isAfter(scope.maxDate)\n              };\n\n              result.dates.push(dateValue);\n            }\n\n            return result;\n          },\n\n          minute: function minute(unixDate) {\n            var selectedDate = moment(unixDate).minute(0).second(0);\n\n            var activeFormat = scope.ngModel ? moment(scope.modelParser(scope.ngModel)).format('YYYY-MM-DD H:mm') : '';\n\n            var result = {\n              'previousView': 'hour',\n              'currentView': 'minute',\n              'nextView': 'setTime',\n              'currentDate': selectedDate.valueOf(),\n              'title': selectedDate.format('' + (showView('month') ? 'MMM ' : '') + (showView('day') ? 'DD ' : '') + (showView('year') ? ' YYYY ' : '') + 'h:mm a'),\n              'leftDate': moment(selectedDate).subtract(1, 'hours').valueOf(),\n              'rightDate': moment(selectedDate).add(1, 'hours').valueOf(),\n              'dates': [],\n              'setUnits': ['year', 'month', 'date', 'hour', 'minute']\n            };\n\n            var limit = 60 / configuration.minuteStep;\n\n            for (var i = 0; i < limit; i++) {\n              var hourMoment = moment(selectedDate).add(i * configuration.minuteStep, 'minute');\n              var dateValue = {\n                'date': hourMoment.valueOf(),\n                'display': hourMoment.format('h:mm'),\n                'active': hourMoment.format('YYYY-MM-DD H:mm') === activeFormat,\n                'disabled': scope.minDate && hourMoment.subtract(1, 'minutes').isBefore(scope.minDate) || scope.maxDate && hourMoment.add(1, 'minutes').isAfter(scope.maxDate)\n              };\n\n              result.dates.push(dateValue);\n            }\n\n            return result;\n          },\n\n          setTime: function setTime(unixDate, keepDropdown) {\n            var tempDate = new Date(unixDate);\n            var newDate = new Date(tempDate.getTime() /* + (tempDate.getTimezoneOffset() * 60000)*/);\n            if (configuration.dropdownSelector && !keepDropdown) {\n              jQuery(configuration.dropdownSelector).dropdown('toggle');\n            }\n            if (angular.isFunction(scope.onSetTime)) {\n              scope.onSetTime(newDate, scope.ngModel);\n            }\n            ctrl.$setViewValue(scope.modelFormatter(newDate));\n            //scope.ngModel = newDate;\n            return dataFactory[scope.data.currentView](unixDate);\n          }\n        };\n\n        var getUTCTime = function getUTCTime() {\n          var tempDate = scope.ngModel ? moment(scope.modelParser(scope.ngModel)).toDate() : new Date();\n          return tempDate.getTime() /* - (tempDate.getTimezoneOffset() * 60000)*/;\n        };\n\n        scope.changeView = function (viewName, unixDate, event, invalid, setTime) {\n          //unixDate = unixDate && _.isDate(unixDate) ? unixDate : scope.modelParser(unixDate).toDate();\n          if (event) {\n            event.stopPropagation();\n            event.preventDefault();\n          }\n\n          if (invalid) return;\n\n          if (viewName && unixDate > -Infinity && dataFactory[viewName]) {\n            if (setTime && viewName !== 'setTime') {\n              var newDate = moment(unixDate),\n                  curDate;\n\n              if (scope.ngModel) {\n                curDate = moment(scope.modelParser(scope.ngModel));\n              } else if (scope.defaultTime) {\n                curDate = moment(scope.defaultTime, \"H:mm:ss\");\n              } else {\n                curDate = moment().startOf('hour');\n              }\n\n              _.each(scope.data.setUnits, function (unit) {\n                var setVal = newDate[unit](),\n                    setDate = curDate[unit](setVal).valueOf();\n\n                dataFactory.setTime(setDate, true);\n              });\n            }\n            scope.data = dataFactory[viewName](unixDate);\n          }\n        };\n\n        scope.changeView(configuration.startView, getUTCTime());\n\n        scope.$watch('ngModel', function (cur, prev) {\n          if (cur !== prev) {\n            scope.changeView(scope.data.currentView, getUTCTime());\n          }\n        });\n\n        function showView(view) {\n          return validViews.indexOf(configuration.maxView) >= validViews.indexOf(view);\n        }\n      }\n    };\n  }\n})();","(function() {\n  'use strict';\n  /*globals angular, moment, jQuery */\n  /*jslint vars:true */\n\n  /**\n   * @license angular-bootstrap-datetimepicker  v0.2.4\n   * (c) 2013 Knight Rider Consulting, Inc. http://www.knightrider.com\n   * License: MIT\n   */\n\n  /**\n   *\n   *    @author       dzuch, Dale \"Ducky\" Lotts\n   *    @since        2013-Jul-8\n   */\n\n  angular\n      .module('ui.bootstrap.datetimepicker', [])\n      .constant('dateTimePickerConfig', {\n        dropdownSelector: null,\n        minuteStep: 5,\n        maxView: 'year',\n        minView: 'minute',\n        startView: 'day',\n        weekStart: 0\n      })\n      .directive('cnDatetimepicker', cnDatetimepicker)\n      .directive('cnDatetimeConfig', cnDatetimeConfig)\n      .directive('datetimepicker', datetimepicker);\n\n\n  // Order of the elements in the validViews array is significant.\n  const validViews = ['minute', 'hour', 'day', 'month', 'year'];\n\n  function cnDatetimepicker() {\n    return {\n      restrict: 'E',\n      require: 'ngModel',\n      template: `\n          <div dropdown class=\"dropdown\">\n            <div class=\"input-group\" data-target=\"#\" id=\"{{inputId}}-container\"\n                 dropdown-toggle ng-disabled=\"{{isDisabled}}\">\n              <input type=\"text\"\n                     class=\"form-control\"\n                     id=\"{{inputId}}\"\n                     name=\"{{inputId}}\"\n                     ng-model=\"ngModel\"\n                     ng-blur=\"lostFocus()\"\n                     cn-datetime-config=\"inputConfig\"\n                     ng-disabled=\"isDisabled\"\n                     ng-required=\"required\"\n                     placeholder=\"{{placeholder}}\">\n              <span class=\"input-group-btn\">\n                <button class=\"btn\" ng-disabled=\"isDisabled\">\n                  <i class=\"{{iconClass}}\"></i>\n                </button>\n              </span>\n            </div>\n            <ul class=\"dropdown-menu cn-datetimepicker-dropdown\" role=\"menu\">\n              <li>\n                <datetimepicker\n                  ng-model=\"ngModel\"\n                  min-date=\"minDate\"\n                  max-date=\"maxDate\"\n                  default-time=\"defaultTime\"\n                  model-formatter=\"modelFormatter\"\n                  model-parser=\"modelParser\"\n                  datetimepicker-config=\"{ dropdownSelector: '#' + inputId + '-container', minView: minView || 'minute', maxView: maxView || 'year' }\">\n                </datetimepicker>\n              </li>\n            </ul>\n          </div>`,\n      scope: {\n        ngModel: '=',\n        minDate: '=',\n        maxDate: '=',\n        defaultTime: '=',\n        maxView: '@',\n        minView: '@',\n        isDisabled: '=',\n        inputId: '@',\n        formatString: '@',\n        modelType: '@',\n        //modelFormat: '@',\n        modelFormatter: '=?',\n        modelParser: '=?',\n        viewFormatter: '=?',\n        viewParser: '=?',\n        required: '=cnDateRequired',\n        onChange: '&'\n      },\n      compile: () => ({pre: Link})\n      //link: Link\n    };\n\n    function Link($scope, elem, attrs, ctrl) {\n\n      let input = elem.find('input');\n\n      //$scope.required = attrs.required;\n      $scope.iconClass = attrs.iconClass || 'fa fa-calendar';\n      $scope.modelFormat = 'YYYY-MM-DD HH:mm:ss';\n      $scope.modelFormatter = $scope.modelFormatter || formatModel;\n      $scope.modelParser = $scope.modelParser || (val => val);\n      $scope.viewFormatter = $scope.viewFormatter || formatView;\n      $scope.viewParser = $scope.viewParser || parseView;\n      $scope.placeholder = attrs.placeholder;\n      $scope.modelType = $scope.modelType || 'string';\n\n      $scope.inputConfig = {\n        viewFormatter: $scope.viewFormatter,\n        viewParser: $scope.viewParser\n      };\n\n      //////////\n\n      $scope.lostFocus = () => {\n        console.log('Focus Lost');\n      }\n\n      $scope.$watch('ngModel', function(newVal, prevVal) {\n        console.log('newVal', newVal);\n        console.log('prevVal', prevVal);\n        console.log('$scope.modelType', $scope.modelType);\n        if(typeof newVal !== $scope.modelType) {\n          $scope.ngModel = formatModel(newVal);\n          return;\n        }\n        console.log('Process others', $scope);\n        if($scope.onChange) {\n\n          $scope.onChange({$value: newVal});\n        }\n        ctrl.$setValidity('schemaForm', true);\n        if($scope.required) {\n          ctrl.$setValidity('tv4-302', !!($scope.ngModel || $scope.ngModel === 0));\n        }\n        if(!angular.equals(newVal, prevVal)) {\n          ctrl.$setDirty();\n        }\n      });\n\n      if ($scope.maxView !== \"hour\") {\n        input.blur(function() {\n          let date = moment($scope.ngModel);\n          if (date.year() < 2000) $scope.ngModel = date.year(date.year() + 2000);\n        });\n      }\n\n      function formatModel(val) {\n        if(!val) return val;\n\n        let date = moment(val);\n        return $scope.modelType === 'string' ? date.format($scope.modelFormat) : date.toDate();\n      }\n\n      function formatView(val) {\n        if(!val) return val;\n\n        return moment(val).format($scope.formatString || 'M/DD/YYYY h:mm a');\n      }\n\n      function parseView(val) {\n        if(!val) return val;\n\n        let m = moment(val, $scope.formatString || 'M/DD/YYYY h:mm a');\n        let update = $scope.modelType === 'string' ? m.format($scope.modelFormat) : m.toDate();\n\n        return update;\n      }\n    }\n  }\n\n  function cnDatetimeConfig() {\n    return {\n      restrict: 'A',\n      require: 'ngModel',\n      priority: 9000,\n      scope: {\n        config: '=cnDatetimeConfig'\n      },\n      link: Link\n    };\n\n    function Link($scope, elem, attrs, ctrl) {\n      ctrl.$formatters.unshift($scope.config.viewFormatter);\n      ctrl.$parsers.unshift($scope.config.viewParser);\n    }\n  }\n\n  datetimepicker.$inject = ['dateTimePickerConfig'];\n  function datetimepicker(defaultConfig) {\n\n    var validateConfiguration = function(configuration) {\n      var validOptions = [\n        'startView', 'maxView', 'minView', 'minuteStep', 'dropdownSelector', 'weekStart'\n      ];\n\n      for(var prop in configuration) {\n        if(configuration.hasOwnProperty(prop)) {\n          if(validOptions.indexOf(prop) < 0) {\n            throw (\"invalid option: \" + prop);\n          }\n        }\n      }\n\n      if(configuration.maxView && validViews.indexOf(configuration.maxView) < validViews.indexOf(configuration.startView)) {\n        configuration.startView = configuration.maxView;\n      }\n\n      if(validViews.indexOf(configuration.startView) < 0) {\n        throw (\"invalid startView value: \" + configuration.startView);\n      }\n\n      if(validViews.indexOf(configuration.minView) < 0) {\n        throw (\"invalid minView value: \" + configuration.minView);\n      }\n\n      if(validViews.indexOf(configuration.minView) > validViews.indexOf(configuration.startView)) {\n        throw (\"startView must be greater than minView\");\n      }\n\n      if(!angular.isNumber(configuration.minuteStep)) {\n        throw (\"minuteStep must be numeric\");\n      }\n      if(configuration.minuteStep <= 0 || configuration.minuteStep >= 60) {\n        throw (\"minuteStep must be greater than zero and less than 60\");\n      }\n      if(configuration.dropdownSelector !== null && !angular.isString(configuration.dropdownSelector)) {\n        throw (\"dropdownSelector must be a string\");\n      }\n\n      if(!angular.isNumber(configuration.weekStart)) {\n        throw (\"weekStart must be numeric\");\n      }\n      if(configuration.weekStart < 0 || configuration.weekStart > 6) {\n        throw (\"weekStart must be greater than or equal to zero and less than 7\");\n      }\n    };\n\n    return {\n      restrict: 'E',\n      require: 'ngModel',\n      template: `\n      <div class='datetimepicker'>\n        <table class='table table-condensed'>\n          <thead>\n          <tr>\n            <th class='left'\n                data-ng-click='changeView(data.currentView, data.leftDate, $event)'>\n              <i class='glyphicon glyphicon-arrow-left'/>\n            </th>\n            <th class='switch'\n                ng-class=\"{'disabled': !showView(data.previousView)}\"\n                colspan='5'\n                data-ng-click='changeView(data.previousView, data.currentDate, $event, !showView(data.previousView))'>\n                {{ data.title }}\n            </th>\n            <th class='right'\n                data-ng-click='changeView(data.currentView, data.rightDate, $event)'>\n              <i class='glyphicon glyphicon-arrow-right'/>\n            </th>\n          </tr>\n          <tr>\n            <th class='dow' data-ng-repeat='day in data.dayNames'>{{ day }}</th>\n          </tr>\n          </thead>\n          <tbody>\n          <tr data-ng-class=\"{ hide: data.currentView == 'day' }\">\n            <td colspan='7' >\n              <span class='{{ data.currentView }}'\n                    data-ng-repeat='dateValue in data.dates'\n                    data-ng-class='{active: dateValue.active, past: dateValue.past, future: dateValue.future, disabled: dateValue.disabled}'\n                    data-ng-click=\"changeView(data.nextView, dateValue.date, $event, dateValue.disabled, true)\">\n                {{ dateValue.display }}\n              </span>\n            </td>\n          </tr>\n          <tr data-ng-show='data.currentView == \"day\"' data-ng-repeat='week in data.weeks'>\n            <td data-ng-repeat='dateValue in week.dates'\n                data-ng-click='changeView(data.nextView, dateValue.date, $event, dateValue.disabled, true)'\n                class='day'\n                data-ng-class='{active: dateValue.active, past: dateValue.past, future: dateValue.future, disabled: dateValue.disabled}'>\n              {{ dateValue.display }}\n            </td>\n          </tr>\n          </tbody>\n        </table>\n      </div>`,\n      scope: {\n        ngModel: \"=\",\n        onSetTime: \"=\",\n        minDate: '=',\n        maxDate: '=',\n        defaultTime: '=',\n        modelFormatter: '=?',\n        modelParser: '=?',\n        datetimepickerConfig: \"=?\"\n      },\n      replace: true,\n      link: function(scope, element, attrs, ctrl) {\n\n        var noop = val => val;\n\n        scope.modelFormatter = scope.modelFormatter || noop;\n        scope.modelParser = scope.modelParser || noop;\n        scope.showView = showView;\n\n        var directiveConfig = {};\n\n        if(scope.datetimepickerConfig) {\n          directiveConfig = scope.datetimepickerConfig;\n        }\n        else if(attrs.datetimepickerConfig) {\n          directiveConfig = scope.$eval(attrs.datetimepickerConfig);\n        }\n\n        var configuration = {};\n\n        angular.extend(configuration, defaultConfig, directiveConfig);\n\n        validateConfiguration(configuration);\n\n        var dataFactory = {\n          year: function(unixDate) {\n            var selectedDate = moment(unixDate).startOf('year');\n            // View starts one year before the decade starts and ends one year after the decade ends\n            // i.e. passing in a date of 1/1/2013 will give a range of 2009 to 2020\n            // Truncate the last digit from the current year and subtract 1 to get the start of the decade\n            var startDecade = (parseInt(selectedDate.year() / 10, 10) * 10);\n            var startDate = moment(selectedDate).year(startDecade - 1).startOf('year');\n            var activeYear = scope.ngModel ? moment(scope.modelParser(scope.ngModel)).year() : 0;\n\n            var result = {\n              'currentView': 'year',\n              'nextView': configuration.minView === 'year' ? 'setTime' : 'month',\n              'title': startDecade + '-' + (startDecade + 9),\n              'leftDate': moment(startDate).subtract(9, 'year').valueOf(),\n              'rightDate': moment(startDate).add(11, 'year').valueOf(),\n              'dates': [],\n              'setUnits': ['year']\n            };\n\n            for(var i = 0; i < 12; i++) {\n              var yearMoment = moment(startDate).add(i, 'years');\n              var dateValue = {\n                'date': yearMoment.valueOf(),\n                'display': yearMoment.format('YYYY'),\n                'past': yearMoment.year() < startDecade,\n                'future': yearMoment.year() > startDecade + 9,\n                'active': yearMoment.year() === activeYear,\n                'disabled': (scope.minDate && yearMoment.year() < moment(scope.minDate).year()) ||\n                            (scope.maxDate && yearMoment.year() > moment(scope.maxDate).year())\n              };\n\n              result.dates.push(dateValue);\n            }\n\n            return result;\n          },\n\n          month: function(unixDate) {\n\n            var startDate = moment(unixDate).startOf('year');\n\n            var activeDate = scope.ngModel ? moment(scope.modelParser(scope.ngModel)).format('YYYY-MMM') : 0;\n\n            var result = {\n              'previousView': 'year',\n              'currentView': 'month',\n              'nextView': configuration.minView === 'month' ? 'setTime' : 'day',\n              'currentDate': startDate.valueOf(),\n              'title': startDate.format('YYYY'),\n              'leftDate': moment(startDate).subtract(1, 'year').valueOf(),\n              'rightDate': moment(startDate).add(1, 'year').valueOf(),\n              'dates': [],\n              'setUnits': ['year', 'month']\n            };\n\n            for(var i = 0; i < 12; i++) {\n              var monthMoment = moment(startDate).add(i, 'months');\n              var dateValue = {\n                'date': monthMoment.valueOf(),\n                'display': monthMoment.format('MMM'),\n                'active': monthMoment.format('YYYY-MMM') === activeDate,\n                'disabled': (scope.minDate && monthMoment.add(1, 'month').isBefore(scope.minDate)) ||\n                            (scope.maxDate && monthMoment.subtract(1, 'month').isAfter(scope.maxDate))\n              };\n\n              result.dates.push(dateValue);\n            }\n\n            return result;\n          },\n\n          day: function(unixDate) {\n\n            var selectedDate = moment(unixDate);\n            var startOfMonth = moment(selectedDate).startOf('month');\n            var endOfMonth = moment(selectedDate).endOf('month');\n\n            var startDate = moment(startOfMonth).subtract(Math.abs(startOfMonth.weekday() - configuration.weekStart), 'days');\n\n            var activeDate = scope.ngModel ? moment(scope.modelParser(scope.ngModel)).format('YYYY-MMM-DD') : '';\n\n            var result = {\n              'previousView': 'month',\n              'currentView': 'day',\n              'nextView': configuration.minView === 'day' ? 'setTime' : 'hour',\n              'currentDate': selectedDate.valueOf(),\n              'title': selectedDate.format(`MMM${showView('year') ? ' YYYY' : ''}`),\n              'leftDate': moment(startOfMonth).subtract(1, 'months').valueOf(),\n              'rightDate': moment(startOfMonth).add(1, 'months').valueOf(),\n              'dayNames': [],\n              'weeks': [],\n              'setUnits': ['year', 'month', 'date']\n            };\n\n\n            for(var dayNumber = configuration.weekStart; dayNumber < configuration.weekStart + 7; dayNumber++) {\n              result.dayNames.push(moment().weekday(dayNumber).format('dd'));\n            }\n\n            for(var i = 0; i < 6; i++) {\n              var week = { dates: [] };\n              for(var j = 0; j < 7; j++) {\n                var monthMoment = moment(startDate).add((i * 7) + j, 'days');\n                var dateValue = {\n                  'date': monthMoment.valueOf(),\n                  'display': monthMoment.format('D'),\n                  'active': monthMoment.format('YYYY-MMM-DD') === activeDate,\n                  'past': monthMoment.isBefore(startOfMonth),\n                  'future': monthMoment.isAfter(endOfMonth),\n                  'disabled': (scope.minDate && monthMoment.add(1, 'days').isBefore(scope.minDate)) ||\n                              (scope.maxDate && monthMoment.subtract(1, 'days').isAfter(scope.maxDate))\n                };\n                week.dates.push(dateValue);\n              }\n              result.weeks.push(week);\n            }\n\n            return result;\n          },\n\n          hour: function(unixDate) {\n            var selectedDate = moment(unixDate).hour(0).minute(0).second(0);\n\n            var activeFormat = scope.ngModel ? moment(scope.modelParser(scope.ngModel)).format('YYYY-MM-DD H') : '';\n\n            var result = {\n              'previousView': 'day',\n              'currentView': 'hour',\n              'nextView': configuration.minView === 'hour' ? 'setTime' : 'minute',\n              'currentDate': selectedDate.valueOf(),\n              'title': showView('day') ? selectedDate.format(`${showView('month') ? 'MMM ' : ''}DD${showView('year') ? ' YYYY' : ''}`) : 'Hour',\n              'leftDate': moment(selectedDate).subtract(1, 'days').valueOf(),\n              'rightDate': moment(selectedDate).add(1, 'days').valueOf(),\n              'dates': [],\n              'setUnits': ['year', 'month', 'date', 'hour']\n            };\n\n            for(var i = 0; i < 24; i++) {\n              var hourMoment = moment(selectedDate).add(i, 'hours');\n              var dateValue = {\n                'date': hourMoment.valueOf(),\n                'display': hourMoment.format('h a'),\n                'active': hourMoment.format('YYYY-MM-DD H') === activeFormat,\n                'disabled': (scope.minDate && hourMoment.add(1, 'hours').isBefore(scope.minDate)) ||\n                            (scope.maxDate && hourMoment.subtract(1, 'hours').isAfter(scope.maxDate))\n              };\n\n              result.dates.push(dateValue);\n            }\n\n            return result;\n          },\n\n          minute: function(unixDate) {\n            var selectedDate = moment(unixDate).minute(0).second(0);\n\n            var activeFormat = scope.ngModel ? moment(scope.modelParser(scope.ngModel)).format('YYYY-MM-DD H:mm') : '';\n\n            var result = {\n              'previousView': 'hour',\n              'currentView': 'minute',\n              'nextView': 'setTime',\n              'currentDate': selectedDate.valueOf(),\n              'title': selectedDate.format(`${showView('month') ? 'MMM ' : ''}${showView('day') ? 'DD ' : ''}${showView('year') ? ' YYYY ' : ''}h:mm a`),\n              'leftDate': moment(selectedDate).subtract(1, 'hours').valueOf(),\n              'rightDate': moment(selectedDate).add(1, 'hours').valueOf(),\n              'dates': [],\n              'setUnits': ['year', 'month', 'date', 'hour', 'minute']\n            };\n\n            var limit = 60 / configuration.minuteStep;\n\n            for(var i = 0; i < limit; i++) {\n              var hourMoment = moment(selectedDate).add(i * configuration.minuteStep, 'minute');\n              var dateValue = {\n                'date': hourMoment.valueOf(),\n                'display': hourMoment.format('h:mm'),\n                'active': hourMoment.format('YYYY-MM-DD H:mm') === activeFormat,\n                'disabled': (scope.minDate && hourMoment.subtract(1, 'minutes').isBefore(scope.minDate)) ||\n                            (scope.maxDate && hourMoment.add(1, 'minutes').isAfter(scope.maxDate))\n              };\n\n              result.dates.push(dateValue);\n            }\n\n            return result;\n          },\n\n          setTime: function(unixDate, keepDropdown) {\n            var tempDate = new Date(unixDate);\n            var newDate = new Date(tempDate.getTime()/* + (tempDate.getTimezoneOffset() * 60000)*/);\n            if(configuration.dropdownSelector && !keepDropdown) {\n              jQuery(configuration.dropdownSelector).dropdown('toggle');\n            }\n            if(angular.isFunction(scope.onSetTime)) {\n              scope.onSetTime(newDate, scope.ngModel);\n            }\n            ctrl.$setViewValue(scope.modelFormatter(newDate));\n            //scope.ngModel = newDate;\n            return dataFactory[scope.data.currentView](unixDate);\n          }\n        };\n\n        var getUTCTime = function() {\n          var tempDate = (scope.ngModel ? moment(scope.modelParser(scope.ngModel)).toDate() : new Date());\n          return tempDate.getTime()/* - (tempDate.getTimezoneOffset() * 60000)*/;\n        };\n\n        scope.changeView = function(viewName, unixDate, event, invalid, setTime) {\n          //unixDate = unixDate && _.isDate(unixDate) ? unixDate : scope.modelParser(unixDate).toDate();\n          if(event) {\n            event.stopPropagation();\n            event.preventDefault();\n          }\n\n          if(invalid) return;\n\n          if(viewName && (unixDate > -Infinity) && dataFactory[viewName]) {\n            if(setTime && viewName !== 'setTime') {\n              var newDate = moment(unixDate),\n                  curDate;\n\n              if (scope.ngModel) { curDate = moment(scope.modelParser(scope.ngModel)); }\n              else if (scope.defaultTime) { curDate = moment(scope.defaultTime, \"H:mm:ss\"); }\n              else { curDate = moment().startOf('hour'); }\n\n              _.each(scope.data.setUnits, function(unit) {\n                var setVal = newDate[unit](),\n                    setDate = curDate[unit](setVal).valueOf();\n\n                dataFactory.setTime(setDate, true);\n              });\n            }\n            scope.data = dataFactory[viewName](unixDate);\n          }\n        };\n\n        scope.changeView(configuration.startView, getUTCTime());\n\n        scope.$watch('ngModel', function(cur, prev) {\n          if(cur !== prev) {\n            scope.changeView(scope.data.currentView, getUTCTime());\n          }\n        });\n\n        function showView(view) {\n          return validViews.indexOf(configuration.maxView) >= validViews.indexOf(view);\n        }\n      }\n    };\n  }\n})();\n"]}